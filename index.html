<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSONæ ¼å¼åŒ–å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            padding: 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .navbar-brand {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3748;
            text-decoration: none;
            margin-right: 40px;
            padding: 20px 0;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .navbar-nav {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 5px;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            color: #4a5568;
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin: 8px 0;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
            transform: translateY(-2px);
        }

        .nav-link.active {
            color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            position: relative;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 20px;
            right: 20px;
            height: 3px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .nav-icon {
            font-size: 16px;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            color: #4a5568;
            cursor: pointer;
            margin-left: auto;
        }

        .content-area {
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #718096;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .panel-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2d3748;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #edf2f7;
            transform: translateY(-1px);
        }

        .btn-danger {
            background: #fed7d7;
            color: #c53030;
            border: 1px solid #feb2b2;
        }

        .btn-danger:hover {
            background: #fbb6ce;
            transform: translateY(-1px);
        }

        .input-area {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-area:focus {
            border-color: #667eea;
        }

        .output-area {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            background: #f8fafc;
            overflow-y: auto;
            white-space: pre-wrap;
            position: relative;
        }

        .json-viewer {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .json-key {
            color: #d63384;
            font-weight: 600;
        }

        .json-string {
            color: #198754;
        }

        .json-number {
            color: #0d6efd;
        }

        .json-boolean {
            color: #6f42c1;
            font-weight: 600;
        }

        .json-null {
            color: #6c757d;
            font-style: italic;
        }

        .json-bracket {
            color: #495057;
            font-weight: bold;
        }

        .collapse-btn {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            margin-right: 5px;
            transition: all 0.2s ease;
        }

        .collapse-btn:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }

        .collapsed {
            display: none;
        }

        .json-line {
            margin: 2px 0;
            padding: 2px 0;
            border-radius: 3px;
            transition: background-color 0.2s ease;
        }

        .json-line:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding: 10px 15px;
            background: #f8fafc;
            border-radius: 8px;
            font-size: 13px;
            color: #64748b;
        }

        .status-valid {
            color: #059669;
            font-weight: 500;
        }

        .status-invalid {
            color: #dc2626;
            font-weight: 500;
        }

        .error-message {
            background: #fef2f2;
            color: #dc2626;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
            border-left: 4px solid #dc2626;
        }

        .collapse-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .stats {
            display: flex;
            gap: 15px;
            font-size: 13px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* å›¾ç‰‡Base64äº’è½¬å·¥å…·æ ·å¼ */
        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .mode-btn {
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .mode-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .conversion-mode {
            display: block;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            background: #f8fafc;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: #e6f3ff;
            transform: scale(1.02);
        }

        .upload-content {
            position: relative;
            z-index: 2;
        }

        .upload-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .upload-area h3 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .upload-area p {
            color: #718096;
            margin-bottom: 10px;
        }

        .image-preview-section, .base64-output-section, .decoded-image-section {
            margin-bottom: 30px;
        }

        .image-preview-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .image-preview {
            max-width: 300px;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            object-fit: contain;
        }

        .decoded-image {
            max-width: 400px;
            max-height: 400px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            object-fit: contain;
        }

        .image-info, .decoded-info {
            flex: 1;
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 5px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .info-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .info-label {
            font-weight: 500;
            color: #4a5568;
        }

        .base64-container, .base64-input-container {
            position: relative;
        }

        .base64-textarea {
            width: 100%;
            height: 200px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            resize: vertical;
            outline: none;
            transition: border-color 0.3s ease;
            word-break: break-all;
            line-height: 1.5;
        }

        .base64-textarea:focus {
            border-color: #667eea;
        }

        .base64-textarea[readonly] {
            background: #f8fafc;
        }

        .image-actions, .output-actions, .input-actions, .decoded-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .decoded-image-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .error-display {
            background: #fef2f2;
            color: #dc2626;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            border-left: 4px solid #dc2626;
        }

        .success-display {
            background: #f0fdf4;
            color: #059669;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            border-left: 4px solid #059669;
        }

        @media (max-width: 768px) {
            .image-preview-container, .decoded-image-container {
                flex-direction: column;
            }
            
            .image-preview, .decoded-image {
                max-width: 100%;
                align-self: center;
            }
            
            .mode-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .mode-btn {
                width: 200px;
                justify-content: center;
            }
            
            .image-actions, .output-actions, .input-actions, .decoded-actions {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .controls {
                justify-content: center;
            }
            
            .input-area, .output-area {
                height: 300px;
            }

            .navbar-nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(15px);
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
                border-radius: 0 0 15px 15px;
                padding: 10px 20px;
            }

            .navbar-nav.active {
                display: flex;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .navbar-brand {
                margin-right: 20px;
            }

            .nav-link {
                margin: 5px 0;
                padding: 15px 10px;
            }

            .container {
                margin-top: 10px;
                margin-bottom: 10px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="#" class="navbar-brand">å¼€å‘è€…å·¥å…·ç®±</a>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span>â˜°</span>
            </button>
            <ul class="navbar-nav" id="navbarNav">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="switchTool('json')">
                        <span class="nav-icon">ğŸ“„</span>
                        JSONæ ¼å¼åŒ–
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchTool('image')">
                        <span class="nav-icon">ğŸ–¼ï¸</span>
                        å›¾ç‰‡Base64äº’è½¬
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchTool('markdown')">
                        <span class="nav-icon">ğŸ“</span>
                        åœ¨çº¿Markdown
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchTool('m3u8')">
                        <span class="nav-icon">ğŸ¬</span>
                        M3U8æ’­æ”¾å™¨
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="content-area">
        <div class="container" id="jsonTool">
        <div class="header">
            <h1>JSONæ ¼å¼åŒ–å·¥å…·</h1>
            <p>ä¸“ä¸šçš„JSONéªŒè¯ã€æ ¼å¼åŒ–å’Œå¯è§†åŒ–å·¥å…·</p>
        </div>

        <div class="main-content">
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">JSONè¾“å…¥</h3>
                </div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="formatJson()">
                        <span>âœ¨</span> æ ¼å¼åŒ–
                    </button>
                    <button class="btn btn-secondary" onclick="minifyJson()">
                        <span>ğŸ—œï¸</span> å‹ç¼©
                    </button>
                    <button class="btn btn-secondary" onclick="clearInput()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç©º
                    </button>
                    <button class="btn btn-secondary" onclick="loadSample()">
                        <span>ğŸ“</span> ç¤ºä¾‹
                    </button>
                </div>
                <textarea 
                    id="jsonInput" 
                    class="input-area" 
                    placeholder="è¯·è¾“å…¥JSONæ•°æ®..."
                    oninput="validateJson()"
                ></textarea>
                <div class="status-bar">
                    <div id="inputStatus">ç­‰å¾…è¾“å…¥...</div>
                    <div class="stats">
                        <div class="stat-item">
                            <span>å­—ç¬¦æ•°:</span>
                            <span id="charCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>è¡Œæ•°:</span>
                            <span id="lineCount">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">æ ¼å¼åŒ–ç»“æœ</h3>
                </div>
                <div class="controls">
                    <div class="collapse-controls">
                        <button class="btn btn-secondary" onclick="collapseLevel(1)">
                            <span>ğŸ“</span> æŠ˜å 1çº§
                        </button>
                        <button class="btn btn-secondary" onclick="collapseLevel(2)">
                            <span>ğŸ“</span> æŠ˜å 2çº§
                        </button>
                        <button class="btn btn-secondary" onclick="collapseLevel(3)">
                            <span>ğŸ“</span> æŠ˜å 3çº§
                        </button>
                        <button class="btn btn-secondary" onclick="expandAll()">
                            <span>ğŸ“‚</span> å±•å¼€å…¨éƒ¨
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="copyOutput()">
                        <span>ğŸ“‹</span> å¤åˆ¶
                    </button>
                </div>
                <div id="jsonOutput" class="output-area"></div>
                <div class="status-bar">
                    <div id="outputStatus">ç­‰å¾…æ ¼å¼åŒ–...</div>
                    <div class="stats">
                        <div class="stat-item">
                            <span>å¯¹è±¡æ•°:</span>
                            <span id="objectCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>æ•°ç»„æ•°:</span>
                            <span id="arrayCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>æ·±åº¦:</span>
                            <span id="maxDepth">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å›¾ç‰‡Base64äº’è½¬å·¥å…· -->
        <div class="container" id="imageTool" style="display: none;">
            <div class="header">
                <h1>å›¾ç‰‡Base64äº’è½¬å·¥å…·</h1>
                <p>æ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼ä¸Base64ç¼–ç çš„ç›¸äº’è½¬æ¢</p>
            </div>

            <!-- è½¬æ¢æ¨¡å¼é€‰æ‹© -->
            <div class="mode-selector">
                <button class="mode-btn active" onclick="switchMode('toBase64')" data-mode="toBase64">
                    <span>ğŸ“¤</span> å›¾ç‰‡è½¬Base64
                </button>
                <button class="mode-btn" onclick="switchMode('toImage')" data-mode="toImage">
                    <span>ğŸ“¥</span> Base64è½¬å›¾ç‰‡
                </button>
            </div>

            <!-- å›¾ç‰‡è½¬Base64æ¨¡å¼ -->
            <div id="toBase64Mode" class="conversion-mode">
                <div class="upload-section">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <div class="upload-icon">ğŸ“</div>
                            <h3>æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©</h3>
                            <p>æ”¯æŒ JPGã€PNGã€GIFã€WebPã€SVG æ ¼å¼</p>
                            <p>æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MB</p>
                            <input type="file" id="fileInput" accept="image/*" style="display: none;">
                            <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                                é€‰æ‹©å›¾ç‰‡
                            </button>
                        </div>
                    </div>
                </div>

                <div class="image-preview-section" id="imagePreviewSection" style="display: none;">
                    <div class="panel">
                        <div class="panel-header">
                            <h3 class="panel-title">å›¾ç‰‡é¢„è§ˆ</h3>
                            <div class="image-actions">
                                <button class="btn btn-secondary" onclick="clearImage()">
                                    <span>ğŸ—‘ï¸</span> æ¸…é™¤
                                </button>
                            </div>
                        </div>
                        <div class="image-preview-container">
                            <img id="imagePreview" class="image-preview" alt="é¢„è§ˆå›¾ç‰‡">
                            <div class="image-info">
                                <div class="info-item">
                                    <span class="info-label">æ–‡ä»¶å:</span>
                                    <span id="fileName">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">æ–‡ä»¶å¤§å°:</span>
                                    <span id="fileSize">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">å›¾ç‰‡å°ºå¯¸:</span>
                                    <span id="imageDimensions">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">æ–‡ä»¶ç±»å‹:</span>
                                    <span id="fileType">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="base64-output-section" id="base64OutputSection" style="display: none;">
                    <div class="panel">
                        <div class="panel-header">
                            <h3 class="panel-title">Base64ç¼–ç ç»“æœ</h3>
                            <div class="output-actions">
                                <button class="btn btn-secondary" onclick="toggleDataURL()">
                                    <span id="dataURLToggleIcon">ğŸ”—</span>
                                    <span id="dataURLToggleText">æ˜¾ç¤ºData URL</span>
                                </button>
                                <button class="btn btn-primary" onclick="copyBase64()">
                                    <span>ğŸ“‹</span> å¤åˆ¶
                                </button>
                                <button class="btn btn-secondary" onclick="downloadBase64()">
                                    <span>ğŸ’¾</span> ä¿å­˜
                                </button>
                            </div>
                        </div>
                        <div class="base64-container">
                            <textarea id="base64Output" class="base64-textarea" readonly placeholder="Base64ç¼–ç å°†åœ¨æ­¤æ˜¾ç¤º..."></textarea>
                        </div>
                        <div class="status-bar">
                            <div class="stats">
                                <div class="stat-item">
                                    <span>ç¼–ç é•¿åº¦:</span>
                                    <span id="base64Length">0</span>
                                </div>
                                <div class="stat-item">
                                    <span>å‹ç¼©æ¯”:</span>
                                    <span id="compressionRatio">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Base64è½¬å›¾ç‰‡æ¨¡å¼ -->
            <div id="toImageMode" class="conversion-mode" style="display: none;">
                <div class="panel">
                    <div class="panel-header">
                        <h3 class="panel-title">Base64ç¼–ç è¾“å…¥</h3>
                        <div class="input-actions">
                            <button class="btn btn-secondary" onclick="clearBase64Input()">
                                <span>ğŸ—‘ï¸</span> æ¸…ç©º
                            </button>
                            <button class="btn btn-secondary" onclick="pasteBase64()">
                                <span>ğŸ“‹</span> ç²˜è´´
                            </button>
                            <button class="btn btn-primary" onclick="decodeBase64()">
                                <span>ğŸ”„</span> è§£ç 
                            </button>
                        </div>
                    </div>
                    <div class="base64-input-container">
                        <textarea id="base64Input" class="base64-textarea" placeholder="è¯·è¾“å…¥Base64ç¼–ç ...&#10;æ”¯æŒå¸¦æœ‰ data:image/... å‰ç¼€çš„å®Œæ•´Data URLï¼Œä¹Ÿæ”¯æŒçº¯Base64ç¼–ç "></textarea>
                    </div>
                    <div class="status-bar">
                        <div id="base64InputStatus">ç­‰å¾…è¾“å…¥...</div>
                        <div class="stats">
                            <div class="stat-item">
                                <span>è¾“å…¥é•¿åº¦:</span>
                                <span id="base64InputLength">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="decoded-image-section" id="decodedImageSection" style="display: none;">
                    <div class="panel">
                        <div class="panel-header">
                            <h3 class="panel-title">è§£ç ç»“æœ</h3>
                            <div class="decoded-actions">
                                <button class="btn btn-primary" onclick="downloadDecodedImage()">
                                    <span>ğŸ’¾</span> ä¸‹è½½å›¾ç‰‡
                                </button>
                                <button class="btn btn-secondary" onclick="copyDecodedImage()">
                                    <span>ğŸ“‹</span> å¤åˆ¶å›¾ç‰‡
                                </button>
                            </div>
                        </div>
                        <div class="decoded-image-container">
                            <img id="decodedImage" class="decoded-image" alt="è§£ç åçš„å›¾ç‰‡">
                            <div class="decoded-info">
                                <div class="info-item">
                                    <span class="info-label">å›¾ç‰‡å°ºå¯¸:</span>
                                    <span id="decodedDimensions">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">é¢„è®¡å¤§å°:</span>
                                    <span id="decodedSize">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">å›¾ç‰‡æ ¼å¼:</span>
                                    <span id="decodedFormat">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container" id="markdownTool" style="display: none;">
            <div class="header">
                <h1>åœ¨çº¿Markdownç¼–è¾‘å™¨</h1>
                <p>å®æ—¶é¢„è§ˆçš„Markdownç¼–è¾‘å™¨</p>
            </div>
            <div style="text-align: center; padding: 100px 0; color: #718096;">
                <div style="font-size: 4em; margin-bottom: 20px;">ğŸ“</div>
                <h3>åœ¨çº¿Markdownç¼–è¾‘å™¨</h3>
                <p>æ­¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...</p>
            </div>
        </div>

        <div class="container" id="m3u8Tool" style="display: none;">
            <div class="header">
                <h1>M3U8æ’­æ”¾å™¨</h1>
                <p>åœ¨çº¿M3U8è§†é¢‘æµæ’­æ”¾å™¨</p>
            </div>
            <div style="text-align: center; padding: 100px 0; color: #718096;">
                <div style="font-size: 4em; margin-bottom: 20px;">ğŸ¬</div>
                <h3>M3U8æ’­æ”¾å™¨</h3>
                <p>æ­¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...</p>
            </div>
        </div>
    </div>

    <script>
        let jsonData = null;
        let collapsedLevels = new Set();

        function validateJson() {
            const input = document.getElementById('jsonInput');
            const status = document.getElementById('inputStatus');
            const charCount = document.getElementById('charCount');
            const lineCount = document.getElementById('lineCount');
            
            const text = input.value;
            charCount.textContent = text.length;
            lineCount.textContent = text.split('\n').length;
            
            if (!text.trim()) {
                status.textContent = 'ç­‰å¾…è¾“å…¥...';
                status.className = '';
                return;
            }
            
            try {
                JSON.parse(text);
                status.textContent = 'âœ… JSONæ ¼å¼æœ‰æ•ˆ';
                status.className = 'status-valid';
            } catch (e) {
                status.textContent = `âŒ JSONæ ¼å¼é”™è¯¯: ${e.message}`;
                status.className = 'status-invalid';
            }
        }

        function formatJson() {
            const input = document.getElementById('jsonInput').value;
            const output = document.getElementById('jsonOutput');
            const outputStatus = document.getElementById('outputStatus');
            
            if (!input.trim()) {
                outputStatus.textContent = 'è¯·è¾“å…¥JSONæ•°æ®';
                outputStatus.className = 'status-invalid';
                return;
            }
            
            try {
                jsonData = JSON.parse(input);
                const formatted = renderJsonWithCollapse(jsonData, 0);
                output.innerHTML = formatted;
                outputStatus.textContent = 'âœ… æ ¼å¼åŒ–æˆåŠŸ';
                outputStatus.className = 'status-valid';
                updateStats(jsonData);
            } catch (e) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = `è§£æé”™è¯¯: ${e.message}`;
                output.innerHTML = '';
                output.appendChild(errorDiv);
                outputStatus.textContent = 'âŒ æ ¼å¼åŒ–å¤±è´¥';
                outputStatus.className = 'status-invalid';
            }
        }

        function minifyJson() {
            const input = document.getElementById('jsonInput').value;
            const inputElement = document.getElementById('jsonInput');
            
            if (!input.trim()) return;
            
            try {
                const parsed = JSON.parse(input);
                const minified = JSON.stringify(parsed);
                inputElement.value = minified;
                validateJson();
            } catch (e) {
                alert('JSONæ ¼å¼é”™è¯¯ï¼Œæ— æ³•å‹ç¼©');
            }
        }

        function clearInput() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('jsonOutput').innerHTML = '';
            document.getElementById('inputStatus').textContent = 'ç­‰å¾…è¾“å…¥...';
            document.getElementById('inputStatus').className = '';
            document.getElementById('outputStatus').textContent = 'ç­‰å¾…æ ¼å¼åŒ–...';
            document.getElementById('outputStatus').className = '';
            document.getElementById('charCount').textContent = '0';
            document.getElementById('lineCount').textContent = '0';
            resetStats();
        }

        function loadSample() {
            const sample = {
                "name": "å¼ ä¸‰",
                "age": 28,
                "email": "zhangsan@example.com",
                "address": {
                    "country": "ä¸­å›½",
                    "city": "åŒ—äº¬",
                    "street": "ä¸­å…³æ‘å¤§è¡—1å·",
                    "zipCode": "100000"
                },
                "hobbies": ["è¯»ä¹¦", "æ¸¸æ³³", "ç¼–ç¨‹"],
                "education": {
                    "university": "æ¸…åå¤§å­¦",
                    "major": "è®¡ç®—æœºç§‘å­¦",
                    "degree": "ç¡•å£«",
                    "graduationYear": 2020
                },
                "skills": [
                    {"name": "JavaScript", "level": "é«˜çº§"},
                    {"name": "Python", "level": "ä¸­çº§"},
                    {"name": "Java", "level": "é«˜çº§"}
                ],
                "isActive": true,
                "lastLogin": null
            };
            
            document.getElementById('jsonInput').value = JSON.stringify(sample, null, 2);
            validateJson();
        }

        function renderJsonWithCollapse(obj, level, path = '') {
            if (obj === null) {
                return '<span class="json-null">null</span>';
            }
            
            if (typeof obj === 'string') {
                return `<span class="json-string">"${escapeHtml(obj)}"</span>`;
            }
            
            if (typeof obj === 'number') {
                return `<span class="json-number">${obj}</span>`;
            }
            
            if (typeof obj === 'boolean') {
                return `<span class="json-boolean">${obj}</span>`;
            }
            
            if (Array.isArray(obj)) {
                if (obj.length === 0) {
                    return '<span class="json-bracket">[]</span>';
                }
                
                const collapseId = `collapse-${path}-${level}`;
                const isCollapsed = collapsedLevels.has(collapseId);
                
                let result = `<button class="collapse-btn" onclick="toggleCollapse('${collapseId}')">${isCollapsed ? '+' : '-'}</button>`;
                result += '<span class="json-bracket">[</span>';
                
                if (isCollapsed) {
                    result += `<span class="json-comment"> ... ${obj.length} items</span>`;
                } else {
                    result += `<div id="${collapseId}" class="${isCollapsed ? 'collapsed' : ''}">`;
                    for (let i = 0; i < obj.length; i++) {
                        const itemPath = `${path}[${i}]`;
                        result += '<div class="json-line" style="margin-left: 20px;">';
                        result += renderJsonWithCollapse(obj[i], level + 1, itemPath);
                        if (i < obj.length - 1) result += ',';
                        result += '</div>';
                    }
                    result += '</div>';
                }
                
                result += '<span class="json-bracket">]</span>';
                return result;
            }
            
            if (typeof obj === 'object') {
                const keys = Object.keys(obj);
                if (keys.length === 0) {
                    return '<span class="json-bracket">{}</span>';
                }
                
                const collapseId = `collapse-${path}-${level}`;
                const isCollapsed = collapsedLevels.has(collapseId);
                
                let result = `<button class="collapse-btn" onclick="toggleCollapse('${collapseId}')">${isCollapsed ? '+' : '-'}</button>`;
                result += '<span class="json-bracket">{</span>';
                
                if (isCollapsed) {
                    result += `<span class="json-comment"> ... ${keys.length} properties</span>`;
                } else {
                    result += `<div id="${collapseId}" class="${isCollapsed ? 'collapsed' : ''}">`;
                    for (let i = 0; i < keys.length; i++) {
                        const key = keys[i];
                        const itemPath = `${path}.${key}`;
                        result += '<div class="json-line" style="margin-left: 20px;">';
                        result += `<span class="json-key">"${escapeHtml(key)}"</span>: `;
                        result += renderJsonWithCollapse(obj[key], level + 1, itemPath);
                        if (i < keys.length - 1) result += ',';
                        result += '</div>';
                    }
                    result += '</div>';
                }
                
                result += '<span class="json-bracket">}</span>';
                return result;
            }
            
            return String(obj);
        }

        function toggleCollapse(collapseId) {
            const element = document.getElementById(collapseId);
            const button = element.previousElementSibling;
            
            if (collapsedLevels.has(collapseId)) {
                collapsedLevels.delete(collapseId);
                element.classList.remove('collapsed');
                button.textContent = '-';
            } else {
                collapsedLevels.add(collapseId);
                element.classList.add('collapsed');
                button.textContent = '+';
            }
        }

        function collapseLevel(targetLevel) {
            if (!jsonData) return;
            
            collapsedLevels.clear();
            addCollapseAtLevel(jsonData, 0, targetLevel, '');
            formatJson();
        }

        function addCollapseAtLevel(obj, currentLevel, targetLevel, path) {
            if (currentLevel >= targetLevel) {
                const collapseId = `collapse-${path}-${currentLevel}`;
                collapsedLevels.add(collapseId);
                return;
            }
            
            if (Array.isArray(obj)) {
                for (let i = 0; i < obj.length; i++) {
                    const itemPath = `${path}[${i}]`;
                    addCollapseAtLevel(obj[i], currentLevel + 1, targetLevel, itemPath);
                }
            } else if (typeof obj === 'object' && obj !== null) {
                const keys = Object.keys(obj);
                for (const key of keys) {
                    const itemPath = `${path}.${key}`;
                    addCollapseAtLevel(obj[key], currentLevel + 1, targetLevel, itemPath);
                }
            }
        }

        function expandAll() {
            collapsedLevels.clear();
            formatJson();
        }

        function copyOutput() {
            if (!jsonData) return;
            
            const formatted = JSON.stringify(jsonData, null, 2);
            navigator.clipboard.writeText(formatted).then(() => {
                const button = event.target.closest('.btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<span>âœ…</span> å·²å¤åˆ¶';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }

        function updateStats(obj) {
            const stats = analyzeJson(obj);
            document.getElementById('objectCount').textContent = stats.objects;
            document.getElementById('arrayCount').textContent = stats.arrays;
            document.getElementById('maxDepth').textContent = stats.maxDepth;
        }

        function analyzeJson(obj, depth = 0) {
            let stats = {
                objects: 0,
                arrays: 0,
                maxDepth: depth
            };
            
            if (Array.isArray(obj)) {
                stats.arrays++;
                for (const item of obj) {
                    const itemStats = analyzeJson(item, depth + 1);
                    stats.objects += itemStats.objects;
                    stats.arrays += itemStats.arrays;
                    stats.maxDepth = Math.max(stats.maxDepth, itemStats.maxDepth);
                }
            } else if (typeof obj === 'object' && obj !== null) {
                stats.objects++;
                for (const key in obj) {
                    const itemStats = analyzeJson(obj[key], depth + 1);
                    stats.objects += itemStats.objects;
                    stats.arrays += itemStats.arrays;
                    stats.maxDepth = Math.max(stats.maxDepth, itemStats.maxDepth);
                }
            }
            
            return stats;
        }

        function resetStats() {
            document.getElementById('objectCount').textContent = '0';
            document.getElementById('arrayCount').textContent = '0';
            document.getElementById('maxDepth').textContent = '0';
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            validateJson();
        });

        // å¯¼èˆªåŠŸèƒ½
        function switchTool(toolName) {
            // éšè—æ‰€æœ‰å·¥å…·
            const tools = ['json', 'image', 'markdown', 'm3u8'];
            tools.forEach(tool => {
                const element = document.getElementById(tool + 'Tool');
                if (element) {
                    element.style.display = 'none';
                }
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å·¥å…·
            const selectedTool = document.getElementById(toolName + 'Tool');
            if (selectedTool) {
                selectedTool.style.display = 'block';
            }
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // æ·»åŠ æ´»åŠ¨çŠ¶æ€åˆ°å½“å‰é“¾æ¥
            event.target.closest('.nav-link').classList.add('active');
            
            // ç§»åŠ¨ç«¯å…³é—­èœå•
            const navbarNav = document.getElementById('navbarNav');
            navbarNav.classList.remove('active');
        }

        function toggleMobileMenu() {
            const navbarNav = document.getElementById('navbarNav');
            navbarNav.classList.toggle('active');
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ç§»åŠ¨èœå•
        document.addEventListener('click', function(event) {
            const navbar = document.querySelector('.navbar');
            const navbarNav = document.getElementById('navbarNav');
            const toggleButton = document.querySelector('.mobile-menu-toggle');
            
            if (!navbar.contains(event.target) && navbarNav.classList.contains('active')) {
                navbarNav.classList.remove('active');
            }
        });

        // å›¾ç‰‡Base64äº’è½¬å·¥å…·åŠŸèƒ½
        let currentMode = 'toBase64';
        let currentImage = null;
        let showDataURL = false;

        function switchMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            // æ˜¾ç¤º/éšè—ç›¸åº”æ¨¡å¼
            document.getElementById('toBase64Mode').style.display = mode === 'toBase64' ? 'block' : 'none';
            document.getElementById('toImageMode').style.display = mode === 'toImage' ? 'block' : 'none';
            
            // é‡ç½®çŠ¶æ€
            if (mode === 'toBase64') {
                clearImage();
            } else {
                clearBase64Input();
            }
        }

        // å›¾ç‰‡ä¸Šä¼ å¤„ç†
        function initImageUpload() {
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            
            fileInput.addEventListener('change', handleFileSelect);
            
            // æ‹–æ‹½åŠŸèƒ½
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleDrop);
            uploadArea.addEventListener('click', () => fileInput.click());
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                processImageFile(file);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processImageFile(files[0]);
            }
        }

        function processImageFile(file) {
            // éªŒè¯æ–‡ä»¶ç±»å‹
            if (!file.type.startsWith('image/')) {
                showError('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
                return;
            }
            
            // éªŒè¯æ–‡ä»¶å¤§å° (10MB)
            if (file.size > 10 * 1024 * 1024) {
                showError('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
                return;
            }
            
            currentImage = file;
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            updateFileInfo(file);
            
            // è¯»å–å¹¶æ˜¾ç¤ºå›¾ç‰‡
            const reader = new FileReader();
            reader.onload = function(e) {
                displayImage(e.target.result, file);
            };
            reader.readAsDataURL(file);
        }

        function updateFileInfo(file) {
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = formatFileSize(file.size);
            document.getElementById('fileType').textContent = file.type;
        }

        function displayImage(dataUrl, file) {
            const preview = document.getElementById('imagePreview');
            preview.src = dataUrl;
            preview.onload = function() {
                document.getElementById('imageDimensions').textContent = `${this.naturalWidth} Ã— ${this.naturalHeight}`;
                document.getElementById('imagePreviewSection').style.display = 'block';
                generateBase64(dataUrl, file);
            };
        }

        function generateBase64(dataUrl, file) {
            const base64Data = showDataURL ? dataUrl : dataUrl.split(',')[1];
            const output = document.getElementById('base64Output');
            output.value = base64Data;
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('base64Length').textContent = base64Data.length.toLocaleString();
            
            const compressionRatio = ((file.size / base64Data.length) * 100).toFixed(1);
            document.getElementById('compressionRatio').textContent = compressionRatio + '%';
            
            document.getElementById('base64OutputSection').style.display = 'block';
        }

        function toggleDataURL() {
            if (!currentImage) return;
            
            showDataURL = !showDataURL;
            const toggleIcon = document.getElementById('dataURLToggleIcon');
            const toggleText = document.getElementById('dataURLToggleText');
            
            if (showDataURL) {
                toggleIcon.textContent = 'ğŸ”—';
                toggleText.textContent = 'ä»…æ˜¾ç¤ºBase64';
            } else {
                toggleIcon.textContent = 'ğŸ“„';
                toggleText.textContent = 'æ˜¾ç¤ºData URL';
            }
            
            // é‡æ–°ç”ŸæˆBase64
            const preview = document.getElementById('imagePreview');
            const reader = new FileReader();
            reader.onload = function(e) {
                generateBase64(e.target.result, currentImage);
            };
            reader.readAsDataURL(currentImage);
        }

        function copyBase64() {
            const output = document.getElementById('base64Output');
            output.select();
            document.execCommand('copy');
            showSuccess('Base64ç¼–ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        }

        function downloadBase64() {
            const output = document.getElementById('base64Output');
            const content = output.value;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'base64-encoded.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function clearImage() {
            currentImage = null;
            document.getElementById('fileInput').value = '';
            document.getElementById('imagePreviewSection').style.display = 'none';
            document.getElementById('base64OutputSection').style.display = 'none';
            document.getElementById('base64Output').value = '';
            showDataURL = false;
            
            // é‡ç½®åˆ‡æ¢æŒ‰é’®çŠ¶æ€
            document.getElementById('dataURLToggleIcon').textContent = 'ğŸ”—';
            document.getElementById('dataURLToggleText').textContent = 'æ˜¾ç¤ºData URL';
        }

        // Base64è½¬å›¾ç‰‡åŠŸèƒ½
        function decodeBase64() {
            const input = document.getElementById('base64Input').value.trim();
            if (!input) {
                showError('è¯·è¾“å…¥Base64ç¼–ç ');
                return;
            }
            
            try {
                let base64Data = input;
                let mimeType = 'image/png'; // é»˜è®¤ç±»å‹
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯Data URLæ ¼å¼
                if (input.startsWith('data:')) {
                    const matches = input.match(/^data:([^;]+);base64,(.+)$/);
                    if (matches) {
                        mimeType = matches[1];
                        base64Data = matches[2];
                    } else {
                        throw new Error('æ— æ•ˆçš„Data URLæ ¼å¼');
                    }
                }
                
                // éªŒè¯Base64æ ¼å¼
                if (!/^[A-Za-z0-9+/]*={0,2}$/.test(base64Data)) {
                    throw new Error('æ— æ•ˆçš„Base64ç¼–ç ');
                }
                
                // åˆ›å»ºå›¾ç‰‡
                const dataUrl = `data:${mimeType};base64,${base64Data}`;
                const img = document.getElementById('decodedImage');
                
                img.onload = function() {
                    document.getElementById('decodedDimensions').textContent = `${this.naturalWidth} Ã— ${this.naturalHeight}`;
                    document.getElementById('decodedFormat').textContent = mimeType;
                    
                    // è®¡ç®—é¢„è®¡æ–‡ä»¶å¤§å°
                    const estimatedSize = (base64Data.length * 0.75);
                    document.getElementById('decodedSize').textContent = formatFileSize(estimatedSize);
                    
                    document.getElementById('decodedImageSection').style.display = 'block';
                    updateBase64InputStatus('âœ… è§£ç æˆåŠŸ', 'status-valid');
                };
                
                img.onerror = function() {
                    throw new Error('æ— æ³•è§£ç å›¾ç‰‡ï¼Œè¯·æ£€æŸ¥Base64ç¼–ç æ˜¯å¦æ­£ç¡®');
                };
                
                img.src = dataUrl;
                
            } catch (error) {
                showError('è§£ç å¤±è´¥: ' + error.message);
                updateBase64InputStatus('âŒ è§£ç å¤±è´¥', 'status-invalid');
            }
        }

        function pasteBase64() {
            navigator.clipboard.readText().then(text => {
                document.getElementById('base64Input').value = text;
                updateBase64InputLength();
            }).catch(err => {
                showError('æ— æ³•è®¿é—®å‰ªè´´æ¿');
            });
        }

        function clearBase64Input() {
            document.getElementById('base64Input').value = '';
            document.getElementById('decodedImageSection').style.display = 'none';
            updateBase64InputLength();
            updateBase64InputStatus('ç­‰å¾…è¾“å…¥...', '');
        }

        function downloadDecodedImage() {
            const img = document.getElementById('decodedImage');
            if (!img.src) return;
            
            const a = document.createElement('a');
            a.href = img.src;
            a.download = 'decoded-image.png';
            a.click();
        }

        function copyDecodedImage() {
            const img = document.getElementById('decodedImage');
            if (!img.src) return;
            
            // åˆ›å»ºcanvasæ¥å¤åˆ¶å›¾ç‰‡
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            ctx.drawImage(img, 0, 0);
            
            canvas.toBlob(blob => {
                const item = new ClipboardItem({'image/png': blob});
                navigator.clipboard.write([item]).then(() => {
                    showSuccess('å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                }).catch(err => {
                    showError('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å³é”®ä¿å­˜å›¾ç‰‡');
                });
            });
        }

        function updateBase64InputLength() {
            const input = document.getElementById('base64Input');
            const length = input.value.length;
            document.getElementById('base64InputLength').textContent = length.toLocaleString();
        }

        function updateBase64InputStatus(message, className) {
            const status = document.getElementById('base64InputStatus');
            status.textContent = message;
            status.className = className;
        }

        // å·¥å…·å‡½æ•°
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showError(message) {
            // åˆ›å»ºé”™è¯¯æç¤º
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-display';
            errorDiv.textContent = message;
            
            // æ·»åŠ åˆ°å½“å‰æ¨¡å¼çš„å®¹å™¨ä¸­
            const container = currentMode === 'toBase64' ? 
                document.getElementById('toBase64Mode') : 
                document.getElementById('toImageMode');
            container.appendChild(errorDiv);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 3000);
        }

        function showSuccess(message) {
            // åˆ›å»ºæˆåŠŸæç¤º
            const successDiv = document.createElement('div');
            successDiv.className = 'success-display';
            successDiv.textContent = message;
            
            // æ·»åŠ åˆ°å½“å‰æ¨¡å¼çš„å®¹å™¨ä¸­
            const container = currentMode === 'toBase64' ? 
                document.getElementById('toBase64Mode') : 
                document.getElementById('toImageMode');
            container.appendChild(successDiv);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.parentNode.removeChild(successDiv);
                }
            }, 3000);
        }

        // Base64è¾“å…¥ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            const base64Input = document.getElementById('base64Input');
            if (base64Input) {
                base64Input.addEventListener('input', updateBase64InputLength);
                initImageUpload();
            }
        });
    </script>
</body>
</html>